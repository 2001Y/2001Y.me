let cursor = document.getElementById('cursor'),
    link = document.querySelectorAll('#article a,button,#article img,#article source,.submit'),
    hover = document.querySelectorAll('a:not(#article a)'),
    text = document.querySelectorAll('input,textarea,pre,.submit'),
    move = 0;

document.addEventListener('mousemove', mousemove);
document.addEventListener('mousedown', mousedown);
document.addEventListener('mouseup', mouseup);

for (let i = 0; i < link.length; i++){
  link[i].addEventListener('mouseenter', function(a){
    if(!move){
      let x = a.offsetX,
          y = a.offsetY;
      cursor.classList.add('zoom','red','opacity');
      link[i].addEventListener('mousemove', function(e){
        let X = e.offsetX-x,
            Y = e.offsetY-y;
        link[i].style.transform = 'translateX(' + X/15 + 'px) translateY(' + Y/15 + 'px)';
      });
    }
  });
  link[i].addEventListener('mouseleave', function(e){
    link[i].style.transform = '';
    remove();
  });
}
for (let i = 0; i < hover.length; i++){
  hover[i].addEventListener('mouseenter', pointCursor);
  hover[i].addEventListener('mouseleave', remove);
}
for (let i = 0; i < text.length; i++){
  text[i].addEventListener('mouseenter', textCursor);
  text[i].addEventListener('mouseleave', remove);
}

function mousemove(e){
  cursor.style.transform = 'translate(' + e.clientX + 'px,' + e.clientY + 'px)';
}
function mousedown(){
  pointCursor();
  document.addEventListener('mousemove', moveTextCursor);
}
function mouseup(){
  let div = document.createElement('div');
  div.className = 'click';
  cursor.appendChild(div);
  document.removeEventListener("mousemove", moveTextCursor);
  move = 0;
  remove();
}

function remove(){
  cursor.classList.remove('red','zoom','text','opacity');
}
function pointCursor(){
  if(!move){
    cursor.classList.add('zoom','red');
  }
}
function textCursor(){
  cursor.classList.add('text','red');
}
function moveTextCursor(){
  textCursor();
  move = 1;
}