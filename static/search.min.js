let params=new URLSearchParams(location.search);params.get("s")&&search(params.get("s"));let body=main.outerHTML;function search(t){if(t.trim()){showResult(createHtml(searchData(t))),searchResult.classList.contains("close")&&searchResult.classList.remove("close"),main.classList.contains("close")||main.classList.add("close"),categoryBox.classList.contains("none")||categoryBox.classList.add("none")}else searchResult.classList.contains("close")||searchResult.classList.add("close"),main.classList.contains("close")&&main.classList.remove("close"),categoryBox.classList.contains("none")&&categoryBox.classList.remove("none")}function searchData(t){let s=[];if((t=t.trim()).length<1)return s;let e=new RegExp(t,"i");for(let a=0;a<data.length;++a){let c=data[a].body.search(e);-1!=c&&s.push([a,c,c+t.length])}return s}function createHtml(t){let s=[];for(let e=0;e<t.length;++e){let a=t[e][0],c=t[e][1],i=t[e][2],r=data[a].url,n=data[a].title,l=data[a].img,o=data[a].date,h=data[a].category,d=data[a].body;s.push(createEntry(r,n,l,o,h,d,c,i))}return s.join("")}function createEntry(t,s,e,a,c,i,r,n){return"<a href="+t+" title="+s+'｜2001Y.me><article class="post '+c+'"><svg class=post-tmb><image xlink:href="/img/'+e+format+'" width="100%" height="100%" preserveAspectRatio="xMidYMid slice" clip-path="url(#tmb)"/></svg><div class=post-data><h2>'+s+"</h2><div class=post-meta><time>"+a+"</time>・"+c+"</div><p>"+excerpt(i,r,n)+"</p></div></article></a>"}function excerpt(t,s,e){return[t.substring(s-10,s),"<b>",t.substring(s,e),"</b>",t.substring(e,e+30)].join("")}function showResult(t){searchResult.innerHTML=t||"検索結果がありません。"}